utitlity function of version 3